window.__require=function e(t,o,n){function r(a,c){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var p="function"==typeof __require&&__require;if(!c&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=o[a]={exports:{}};t[a][0].call(l.exports,function(e){return r(t[a][1][e]||e)},l,l.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"d00b6zFMhZP2aRN2cxc5ock","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioManager=void 0;var n=function(){function e(){this.currentBgm=null}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.initBGM=function(e){this.playBGM(e)},e.prototype.playBGM=function(e){this.currentBgm!==e?(cc.audioEngine.stopMusic(),this.currentBgm=e,cc.audioEngine.playMusic(e,!0)):cc.audioEngine.isMusicPlaying||cc.audioEngine.playMusic(e,!0)},e.prototype.stopBGM=function(){cc.audioEngine.isMusicPlaying&&cc.audioEngine.stopMusic()},e._instance=null,e}();o.AudioManager=n,cc._RF.pop()},{}],BackButton:[function(e,t,o){"use strict";cc._RF.push(t,"2a935/4eqFCLY57ngovLQli","BackButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button=null,t}return r(t,e),t.prototype.start=function(){this.button&&this.button.node.on("click",this.onButtonClick,this)},t.prototype.onButtonClick=function(){cc.director.resume(),cc.director.loadScene("StageSelectScene")},i([s(cc.Button)],t.prototype,"button",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],Bullet:[function(e,t,o){"use strict";cc._RF.push(t,"ac21euJk/ZEhoPHjN9sFJ3+","Bullet");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Bullet=void 0;var a=cc._decorator,c=a.ccclass,s=(a.property,a.disallowMultiple),p=e("./../../Scripts/DataManager"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletSpeed=300,t.bulletDistance=1e3,t}return r(t,e),t.prototype.update=function(e){this.node.x+=this.bulletSpeed*p.DataManager.getInstance().gameSpeed*e,this.node.x>this.bulletDistance&&this.node.destroy()},i([c,s],t)}(cc.Component);o.Bullet=l,cc._RF.pop()},{"./../../Scripts/DataManager":"DataManager"}],ChoosePlayerScene:[function(e,t,o){"use strict";cc._RF.push(t,"4788fNHPtdKv5fBnXQuk1iH","ChoosePlayerScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=e("./AudioManager"),l=e("./DataManager"),u=function(){function e(){this.nodeUnready=null,this.nodeReady=null}return i([s(cc.Node)],e.prototype,"nodeUnready",void 0),i([s(cc.Node)],e.prototype,"nodeReady",void 0),i([c("PlayerJoin")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgmClip=null,t.availablePlayers=[],t}return r(t,e),t.prototype.loadNextScene=function(){cc.director.loadScene("ChooseRoleScene")},t.prototype.loadBackScene=function(){cc.director.loadScene("StartScene")},t.prototype.initNextButton=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component=cc.director.getScene().name,e.handler="loadNextScene",cc.find("Canvas/NextButton").getComponent(cc.Button).clickEvents.push(e)},t.prototype.initBackButton=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component=cc.director.getScene().name,e.handler="loadBackScene",cc.find("Canvas/BackButton").getComponent(cc.Button).clickEvents.push(e)},t.prototype.onKeyDown=function(e){var t,o=[cc.macro.KEY.q,cc.macro.KEY.r,cc.macro.KEY.u,cc.macro.KEY.p];l.DataManager.getInstance().userCount=0;for(var n=0;n<o.length;n++)e.keyCode==o[n]&&(t=[this.availablePlayers[n].nodeUnready.active,this.availablePlayers[n].nodeReady.active],this.availablePlayers[n].nodeReady.active=t[0],this.availablePlayers[n].nodeUnready.active=t[1]),this.availablePlayers[n].nodeReady.active&&l.DataManager.getInstance().userCount++},t.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.availablePlayers.forEach(function(e,t){e.nodeReady.active=t<l.DataManager.getInstance().userCount,e.nodeUnready.active=t>=l.DataManager.getInstance().userCount}),this.initNextButton(),this.initBackButton(),p.AudioManager.getInstance().playBGM(this.bgmClip)},t.prototype.update=function(){cc.find("Canvas/UserCount").getComponent(cc.Label).string=String(l.DataManager.getInstance().userCount),cc.find("Canvas/NextButton").getComponent(cc.Button).node.active=0!==l.DataManager.getInstance().userCount},i([s(cc.AudioClip)],t.prototype,"bgmClip",void 0),i([s([u])],t.prototype,"availablePlayers",void 0),i([c],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./AudioManager":"AudioManager","./DataManager":"DataManager"}],ChooseRoleScene:[function(e,t,o){"use strict";cc._RF.push(t,"18567aezmdKaoYgn2xxzM59","ChooseRoleScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=e("./DataManager"),l=e("./AudioManager"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgmClip=null,t.selectedCharactor=[],t.availableCharactorContainer=null,t.rolesSprite=[],t.rolesIndex=0,t.rolesUsed=[!1,!1,!1,!1,!1,!1,!1,!1],t}return r(t,e),t.prototype.loadNextScene=function(){cc.director.loadScene("StageSelectScene")},t.prototype.loadBackScene=function(){cc.director.loadScene("ChoosePlayerScene")},t.prototype.initNextButton=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component=cc.director.getScene().name,e.handler="loadNextScene",cc.find("Canvas/NextButton").getComponent(cc.Button).clickEvents.push(e)},t.prototype.initBackButton=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component=cc.director.getScene().name,e.handler="loadBackScene",cc.find("Canvas/BackButton").getComponent(cc.Button).clickEvents.push(e)},t.prototype.onKeyDown=function(e){if(e.keyCode==cc.macro.KEY.up&&(this.rolesIndex=(this.rolesIndex+4)%8),e.keyCode==cc.macro.KEY.down&&(this.rolesIndex=(this.rolesIndex-4+8)%8),e.keyCode==cc.macro.KEY.left&&(this.rolesIndex=(this.rolesIndex>=4?4:0)+(this.rolesIndex-1+4)%4),e.keyCode==cc.macro.KEY.right&&(this.rolesIndex=(this.rolesIndex>=4?4:0)+(this.rolesIndex+1)%4),e.keyCode==cc.macro.KEY.enter&&p.DataManager.getInstance().selectedPlayers.length<Math.max(2,p.DataManager.getInstance().userCount)){if(this.rolesUsed[this.rolesIndex])return;this.rolesUsed[this.rolesIndex]=!0;var t=this.availableCharactorContainer.children[this.rolesIndex];t.getChildByName("Sprite").active=!1,p.DataManager.getInstance().selectedPlayers.push(t.name.toLowerCase())}},t.prototype.onLoad=function(){p.DataManager.getInstance().selectedPlayers=[],cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.initNextButton(),this.initBackButton(),cc.find("Canvas/UserCount").getComponent(cc.Label).string=String(p.DataManager.getInstance().userCount),this.selectedCharactor.forEach(function(e){e.active=!1});for(var e=Math.max(2,p.DataManager.getInstance().userCount),t=1080/(e+1),o=0;o<e;o++)this.selectedCharactor[o].active=!0,this.selectedCharactor[o].setPosition(new cc.Vec2(t*(o+1)-540,-160));l.AudioManager.getInstance().playBGM(this.bgmClip)},t.prototype.update=function(){if(p.DataManager.getInstance().selectedPlayers.length<Math.max(2,p.DataManager.getInstance().userCount)){cc.find("Canvas/NextButton").getComponent(cc.Button).node.active=!1;var e=this.selectedCharactor[p.DataManager.getInstance().selectedPlayers.length].getChildByName("UseRole");e.getComponent(cc.Sprite).spriteFrame=this.rolesSprite[this.rolesIndex],e.scaleX=5,e.scaleY=5,1==this.rolesUsed[this.rolesIndex]?e.active=!1:e.active=!0}else cc.find("Canvas/NextButton").getComponent(cc.Button).node.active=!0},i([s(cc.AudioClip)],t.prototype,"bgmClip",void 0),i([s([cc.Node])],t.prototype,"selectedCharactor",void 0),i([s(cc.Node)],t.prototype,"availableCharactorContainer",void 0),i([s([cc.SpriteFrame])],t.prototype,"rolesSprite",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./DataManager":"DataManager"}],CompleteScene:[function(e,t,o){"use strict";cc._RF.push(t,"ae551WJFq5G45bznQNwDVj0","CompleteScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CompleteScene=void 0;var a=e("./Firebase/User"),c=e("./DataManager"),s=e("../Game/Scripts/PlayerController"),p=cc._decorator,l=p.ccclass,u=p.property,d=function(){function e(){this.groupName="",this.playerPrefab=null,this.enemyPrefabs=[]}return i([u()],e.prototype,"groupName",void 0),i([u(cc.Prefab)],e.prototype,"playerPrefab",void 0),i([u([cc.Prefab])],e.prototype,"enemyPrefabs",void 0),i([l("CompleteColorGroup")],e)}(),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stageLabel=null,t.stars=[],t.charactorContainer=null,t.charactorSpacing=100,t.animationDuration=5,t.summaryLayer=null,t.scoreLabel=null,t.scoreBoard=null,t.charactorDisplays=[],t.availableColorGroups=[],t.instantiatedPlayerPrefabs=[],t}return r(t,e),t.prototype.loadBackScene=function(){cc.director.loadScene("StageSelectScene")},t.prototype.onLoad=function(){var e=this;this.summaryLayer.active=!1,this.updateUserScore(function(){e.initPlayerPrefabs(),e.initAnimationLayer(),e.initSummaryLayer(),e.playNumberCountAnimation(0,a.score,3),cc.log("User score updated successfully!")})},t.prototype.updateUserScore=function(e){var t=firebase.auth().currentUser;if(t){var o=firebase.database().ref("username").child(t.uid);o.once("value").then(function(){var t=a.score;o.update({score:t}).then(function(){e&&e()})})}},t.prototype.initPlayerPrefabs=function(){for(var e={},t=0,o=this.availableColorGroups;t<o.length;t++){var n=o[t];e[n.groupName]=n}for(var r=0;r<c.DataManager.getInstance().selectedPlayers.length;r++){var i=c.DataManager.getInstance().selectedPlayers[r],a=cc.instantiate(e[i].playerPrefab);a.setParent(this.node);var p=a.getComponent(s.PlayerController),l=p.createSprite();p.playerSpeed=0,cc.director.getPhysicsManager().enabled=!1,this.instantiatedPlayerPrefabs.push({player:a,sprite:l,boxSize:p.physicsBoxCollider.size})}},t.prototype.initAnimationLayer=function(){for(var e=this,t={},o=0,n=this.availableColorGroups;o<n.length;o++){var r=n[o];t[r.groupName]=r}for(var i=c.DataManager.getInstance().selectedPlayers.reduce(function(e,o){return e.concat(t[o].enemyPrefabs)},[]),a=0,s=0;s<i.length;s++){var p=cc.instantiate(i[s]);p.setScale(-2,2),p.setParent(this.charactorContainer),p.setPosition(new cc.Vec2(a-p.width,p.height)),a=a-2*p.width-this.charactorSpacing}for(s=0;s<this.instantiatedPlayerPrefabs.length;s++)this.instantiatedPlayerPrefabs[s].player.setParent(this.charactorContainer),this.instantiatedPlayerPrefabs[s].sprite.setParent(this.charactorContainer),this.instantiatedPlayerPrefabs[s].sprite.setScale(4,4),this.instantiatedPlayerPrefabs[s].player.setPosition(a-this.instantiatedPlayerPrefabs[s].boxSize.width,this.instantiatedPlayerPrefabs[s].boxSize.height),a=a-2*this.instantiatedPlayerPrefabs[s].boxSize.width-this.charactorSpacing;var l=new cc.Vec2(cc.find("Canvas").getContentSize().width-a,0);this.charactorContainer.runAction(cc.moveBy(this.animationDuration,l));var u=c.DataManager.getInstance().selectedPlayers.reduce(function(e,t){return c.DataManager.getInstance().gameSummary[t]?c.DataManager.getInstance().gameSummary[t].stars+e:e},0);for(s=0;s<3;s++)this.stars[s].active=s<u;this.scheduleOnce(function(){e.scoreBoard.setScale(0,0),e.summaryLayer.active=!0;var t=e.scoreBoard.getComponent(cc.Animation);t.play(t.defaultClip.name);for(var o=0;o<c.DataManager.getInstance().selectedPlayers.length;o++)e.instantiatedPlayerPrefabs[o].player.setParent(e.charactorDisplays[o]),e.instantiatedPlayerPrefabs[o].sprite.setParent(e.charactorDisplays[o]),e.instantiatedPlayerPrefabs[o].sprite.setScale(6,6),e.instantiatedPlayerPrefabs[o].player.x=0,e.instantiatedPlayerPrefabs[o].player.y=4*e.instantiatedPlayerPrefabs[o].boxSize.height},this.animationDuration)},t.prototype.initSummaryLayer=function(){this.charactorDisplays.forEach(function(e){e.active=!1});for(var e=1080/(c.DataManager.getInstance().selectedPlayers.length+1),t=0;t<c.DataManager.getInstance().selectedPlayers.length;t++){this.charactorDisplays[t].active=!0,this.charactorDisplays[t].setPosition(new cc.Vec2(e*(t+1)-540,0));var o=c.DataManager.getInstance().gameSummary[c.DataManager.getInstance().selectedPlayers[t]];o&&(this.charactorDisplays[t].getChildByName("deathes").getComponent(cc.Label).string=""+o.deathes,this.charactorDisplays[t].getChildByName("kills").getComponent(cc.Label).string=""+o.kills)}},t.prototype.playNumberCountAnimation=function(e,t,o){var n=this,r=cc.sequence(cc.callFunc(function(){var r=t/(60*o),i=e;n.scoreLabel.string=i.toString(),n.schedule(function(){i+=r,n.scoreLabel.string=Math.floor(i).toString()},1/60,60*o-1)}),cc.delayTime(o),cc.callFunc(function(){n.scoreLabel.string=t.toString()}));this.scoreLabel.node.runAction(r)},i([u(cc.Label)],t.prototype,"stageLabel",void 0),i([u([cc.Node])],t.prototype,"stars",void 0),i([u(cc.Node)],t.prototype,"charactorContainer",void 0),i([u()],t.prototype,"charactorSpacing",void 0),i([u()],t.prototype,"animationDuration",void 0),i([u(cc.Node)],t.prototype,"summaryLayer",void 0),i([u(cc.Label)],t.prototype,"scoreLabel",void 0),i([u(cc.Node)],t.prototype,"scoreBoard",void 0),i([u([cc.Node])],t.prototype,"charactorDisplays",void 0),i([u([d])],t.prototype,"availableColorGroups",void 0),i([l],t)}(cc.Component);o.CompleteScene=h,cc._RF.pop()},{"../Game/Scripts/PlayerController":"PlayerController","./DataManager":"DataManager","./Firebase/User":"User"}],Crystal:[function(e,t,o){"use strict";cc._RF.push(t,"e01e4B+w2xFprVmpR8eyAzH","Crystal");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Crystal=void 0;var a=e("../../Scripts/Firebase/User"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.disallowMultiple,u=e("./PlayerController"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultAnimation=null,t.crystalEffect=null,t.anim=null,t}return r(t,e),t.prototype.onLoad=function(){this.anim=this.addComponent(cc.Animation),this.anim.addClip(this.defaultAnimation)},t.prototype.update=function(){this.anim.getAnimationState(this.defaultAnimation.name).isPlaying||this.anim.play(this.defaultAnimation.name)},t.prototype.onBeginContact=function(e,t,o){var n=o.node,r=n.getComponent(u.PlayerController);r&&(n.name===this.node.name&&(a.score+=5,r.performance.collected++),cc.audioEngine.playEffect(this.crystalEffect,!1),this.node.destroy())},i([p(cc.AnimationClip)],t.prototype,"defaultAnimation",void 0),i([p(cc.AudioClip)],t.prototype,"crystalEffect",void 0),i([s,l],t)}(cc.Component);o.Crystal=d,cc._RF.pop()},{"../../Scripts/Firebase/User":"User","./PlayerController":"PlayerController"}],DataManager:[function(e,t,o){"use strict";cc._RF.push(t,"8a4d7tT8/5DA7wys5cRrSXu","DataManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.DataManager=void 0;var n=function(){function e(){this.bgmVolume=.5,this.effectVolume=.5,this.playerLives=5,this.gameSpeed=1,this.userCount=1,this.currentPlayerLives=5,this.currentStars=0,this.selectedPlayers=["black","white"],this.gameSummary={}}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e._instance=null,e}();o.DataManager=n,cc._RF.pop()},{}],Enemy:[function(e,t,o){"use strict";cc._RF.push(t,"0b9760JxVpK65NWzhDFahDf","Enemy");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Enemy=void 0;var a=e("../../Scripts/Firebase/User"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.disallowMultiple,u=e("./../../Scripts/DataManager"),d=e("./PlayerController"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Speed=0,t.defaultAnimation=null,t.anim=null,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.anim=this.getComponent(cc.Animation),this.anim.addClip(this.defaultAnimation),this.node.getChildByName("p").active=!1},t.prototype.update=function(e){this.node.x+=this.Speed*u.DataManager.getInstance().gameSpeed*e,this.anim.getAnimationState(this.defaultAnimation.name).isPlaying||this.anim.play(this.defaultAnimation.name)},t.prototype.onBeginContact=function(e,t,o){var n=this,r=o.node,i=r.getComponent(d.PlayerController);i?i.invincibleTime>0||r.name===this.node.name?(e.disabled=!0,a.score+=10,i.performance.kills++,this.node.getChildByName("p")?(this.node.getChildByName("p").active=!0,this.scheduleOnce(function(){n.node.destroy()},.1)):this.node.destroy()):(e.disabled=!0,i.die()):"bullet"===r.name&&(r.parent&&r.parent.name===this.node.name?(e.disabled=!0,r.parent.getComponent(d.PlayerController).performance.kills++,this.node.getChildByName("p")?(this.node.getChildByName("p").active=!0,this.scheduleOnce(function(){n.node.destroy(),r.destroy()},.1)):(this.node.destroy(),r.destroy())):r.destroy())},i([p()],t.prototype,"Speed",void 0),i([p(cc.AnimationClip)],t.prototype,"defaultAnimation",void 0),i([s,l],t)}(cc.Component);o.Enemy=h,cc._RF.pop()},{"../../Scripts/Firebase/User":"User","./../../Scripts/DataManager":"DataManager","./PlayerController":"PlayerController"}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"693be11OpVC1YNzMzuaeRT0","GameManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameManager=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,p=a.disallowMultiple,l=e("./../../Scripts/DataManager"),u=e("./PlayerController"),d=function(){function e(e){this.m=2147483648,this.a=1103515245,this.c=2073247261,this.s=e||Math.floor(Math.random()*(this.m-1))}return e.prototype.random=function(){return this.s=(this.a*this.s+this.c)%(this.m-1),this.s},e.prototype.percentage=function(){return this.random()%100},e}(),h=function(){function e(){this.groupName="",this.reprColor=new cc.Color(0,0,0),this.playerPrefab=null,this.enemyPrefabs=[],this.collectablePrefabs=[]}return i([s()],e.prototype,"groupName",void 0),i([s(cc.Color)],e.prototype,"reprColor",void 0),i([s(cc.Prefab)],e.prototype,"playerPrefab",void 0),i([s([cc.Prefab])],e.prototype,"enemyPrefabs",void 0),i([s([cc.Prefab])],e.prototype,"collectablePrefabs",void 0),i([c("ColorGroup")],e)}(),f=function(){function e(){this.colorName=""}return i([s()],e.prototype,"colorName",void 0),i([c("SelectedPlayer")],e)}(),y=function(){function e(){this.camera=null,this.cameraShiftingSpeed=1e3,this.cameraOffset=new cc.Vec2(-125,-250)}return i([s(cc.Node)],e.prototype,"camera",void 0),i([s()],e.prototype,"cameraShiftingSpeed",void 0),i([s()],e.prototype,"cameraOffset",void 0),i([c("CameraProperties")],e)}(),g=function(){function e(){this.playerContainer=null,this.playerInitialPosition=new cc.Vec2(-400,50),this.playerSpeed=150,this.playerJumpVel=600,this.playerShiftingSpeed=1e3,this.distBetweenPlayers=100,this.bulletSpeed=300,this.bulletDistance=1e3,this.selectedPlayers=[]}return i([s(cc.Node)],e.prototype,"playerContainer",void 0),i([s(cc.Vec2)],e.prototype,"playerInitialPosition",void 0),i([s()],e.prototype,"playerSpeed",void 0),i([s()],e.prototype,"playerJumpVel",void 0),i([s()],e.prototype,"playerShiftingSpeed",void 0),i([s()],e.prototype,"distBetweenPlayers",void 0),i([s()],e.prototype,"bulletSpeed",void 0),i([s()],e.prototype,"bulletDistance",void 0),i([s([f])],e.prototype,"selectedPlayers",void 0),i([c("PlayerProperties")],e)}(),m=function(){function e(){this.enemyContainer=null,this.minDistBetweenEnemy=64,this.enemySpawnProbability=50}return i([s(cc.Node)],e.prototype,"enemyContainer",void 0),i([s()],e.prototype,"minDistBetweenEnemy",void 0),i([s({slide:!0,min:0,max:100,step:1})],e.prototype,"enemySpawnProbability",void 0),i([c("EnemyProperties")],e)}(),v=function(){function e(){this.collectableContainer=null,this.minDistBetweenCollectable=64,this.minDistAboveGround=32,this.maxDistAboveGround=96,this.collectableSpawnProbability=50,this.shieldPrefab=null,this.shieldSpawnProbability=5}return i([s(cc.Node)],e.prototype,"collectableContainer",void 0),i([s()],e.prototype,"minDistBetweenCollectable",void 0),i([s()],e.prototype,"minDistAboveGround",void 0),i([s()],e.prototype,"maxDistAboveGround",void 0),i([s({slide:!0,min:0,max:100,step:1})],e.prototype,"collectableSpawnProbability",void 0),i([s(cc.Prefab)],e.prototype,"shieldPrefab",void 0),i([s({slide:!0,min:0,max:100,step:1})],e.prototype,"shieldSpawnProbability",void 0),i([c("CollectableProperties")],e)}(),b=function(){function e(){this.colliderContainer=null,this.minPlatformWidth=64,this.maxPlatformWidth=384,this.platformSpriteL=null,this.platformSpriteM=null,this.platformSpriteR=null,this.initialPlatforms=[]}return i([s(cc.Node)],e.prototype,"colliderContainer",void 0),i([s()],e.prototype,"minPlatformWidth",void 0),i([s()],e.prototype,"maxPlatformWidth",void 0),i([s(cc.SpriteFrame)],e.prototype,"platformSpriteL",void 0),i([s(cc.SpriteFrame)],e.prototype,"platformSpriteM",void 0),i([s(cc.SpriteFrame)],e.prototype,"platformSpriteR",void 0),i([s([cc.Vec3])],e.prototype,"initialPlatforms",void 0),i([c("StageGeneratingProperties")],e)}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stageRandomSeed=117492658,t.isInfiniteStage=!1,t.cameraProperties=new y,t.playerProperties=new g,t.enemyProperties=new m,t.collectableProperties=new v,t.stageGeneratingProperties=new b,t.availableColorGroups=[],t.rebornEffect=null,t.switchEffect=null,t.cameraSize=null,t.stageWidth=null,t.players=[],t.gamepads={},t.lives=5,t.physicsManager=null,t.canSwitch=!0,t.stageEnded=!1,t.random=null,t}return r(t,e),t.prototype.onLoad=function(){var e=this;this.random=new d(this.stageRandomSeed),this.physicsManager=cc.director.getPhysicsManager(),this.physicsManager.enabled=!0,this.physicsManager.gravity=cc.v2(0,-1600),this.lives=l.DataManager.getInstance().playerLives,l.DataManager.getInstance().currentPlayerLives=this.lives,l.DataManager.getInstance().currentStars=0,this.stageGeneratingProperties.initialPlatforms.forEach(function(t){e.createNewPlatform(t.x,t.y,t.z)}),this.cameraSize=cc.find("Canvas").getContentSize(),this.stageWidth=Math.max.apply(Math,this.stageGeneratingProperties.colliderContainer.children.map(function(e){return e.getPosition().x+e.getComponent(cc.PhysicsBoxCollider).size.width})),this.spawnPlayers(),this.spawnEnemies(),this.spawnCollectables(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),window.addEventListener("gamepadconnected",this.onGamepadConnected.bind(this)),window.addEventListener("gamepaddisconnected",this.onGamepadDisconnected.bind(this))},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.update=function(e){this.pollGamepads(),this.scanDeadPlayer(),this.cameraFollow(e),l.DataManager.getInstance().currentPlayerLives=this.lives;for(var t=0,o=0;o<this.players.length;o++)t+=this.players[o].performance.stars;l.DataManager.getInstance().currentStars=t,this.isInfiniteStage?this.generateMorePlatform():this.getLeadingPlayer().node.x>this.stageWidth-this.cameraSize.width&&this.endStage()},t.prototype.onKeyDown=function(e){if(!this.stageEnded)switch(e.keyCode){case cc.macro.KEY.up:1===l.DataManager.getInstance().userCount?this.players[0]&&this.isLeadingPlayer(0)?this.players[0].playerJump():this.players[1].playerJump():this.players[0]&&this.players[0].playerJump();break;case cc.macro.KEY.w:1===l.DataManager.getInstance().userCount?this.players[0]&&this.isLeadingPlayer(0)?this.players[1].playerJump():this.players[0].playerJump():this.players[1]&&this.players[1].playerJump();break;case cc.macro.KEY.t:this.players[2]&&this.players[2].playerJump();break;case cc.macro.KEY.i:this.players[3]&&this.players[3].playerJump();break;case cc.macro.KEY.right:1===l.DataManager.getInstance().userCount&&this.isLeadingPlayer(0)?this.switchWithLeadingPlayer(1):this.switchWithLeadingPlayer(0);break;case cc.macro.KEY.d:this.switchWithLeadingPlayer(1);break;case cc.macro.KEY.h:this.switchWithLeadingPlayer(2);break;case cc.macro.KEY.l:this.switchWithLeadingPlayer(3);break;case cc.macro.KEY.down:1===l.DataManager.getInstance().userCount?this.getLeadingPlayer().playerShoot():this.players[0]&&this.isLeadingPlayer(0)&&this.players[0].playerShoot();break;case cc.macro.KEY.s:this.players[1]&&this.isLeadingPlayer(1)&&l.DataManager.getInstance().userCount>=2&&this.players[1].playerShoot();break;case cc.macro.KEY.g:this.players[2]&&this.isLeadingPlayer(2)&&this.players[2].playerShoot();break;case cc.macro.KEY.k:this.players[3]&&this.isLeadingPlayer(3)&&this.players[3].playerShoot()}},t.prototype.cameraFollow=function(e){var t=new cc.Vec2(this.getLastPlayer().node.position.x+this.cameraSize.width/2,this.cameraSize.height/2).add(this.cameraProperties.cameraOffset),o=t.sub(this.cameraProperties.camera.getPosition()),n=this.cameraProperties.cameraShiftingSpeed*l.DataManager.getInstance().gameSpeed*e;o.mag()<=n?this.cameraProperties.camera.setPosition(t):this.cameraProperties.camera.setPosition(this.cameraProperties.camera.getPosition().add(o.normalize().mul(n))),this.cameraProperties.camera.x=Math.max(0,Math.min(this.cameraProperties.camera.x,this.stageWidth-this.cameraSize.width))},t.prototype.endStage=function(){if(!this.stageEnded){for(var e={},t=0,o=this.availableColorGroups;t<o.length;t++){var n=o[t];e[n.groupName]=n}this.stageEnded=!0,l.DataManager.getInstance().gameSummary={};for(var r=0;r<l.DataManager.getInstance().selectedPlayers.length;r++)for(var i=l.DataManager.getInstance().selectedPlayers[r],a=e[i].reprColor.toHEX(),c=0;c<this.players.length;c++)this.players[c].node.name===a&&(l.DataManager.getInstance().gameSummary[i]=this.players[c].performance);cc.director.loadScene("CompleteScene")}},t.prototype.getRandomColorGroup=function(){for(var e=l.DataManager.getInstance().selectedPlayers,t=e[this.random.random()%e.length],o=0,n=this.availableColorGroups;o<n.length;o++){var r=n[o];if(r.groupName==t)return r}throw new Error("Invalid ColorGroup appeared during randomization!!")},t.prototype.getStagePlatforms=function(e){var t=this;return this.stageGeneratingProperties.colliderContainer.children.map(function(e){var o=e.getPosition().add(new cc.Vec2(-t.cameraSize.width/2,-t.cameraSize.height/2)),n=e.getComponent(cc.PhysicsBoxCollider).size.width;return{x:o.x,y:o.y,w:n}}).filter(e).sort(function(e,t){return e.x-t.x})},t.prototype.generateMorePlatform=function(){if(!(this.cameraProperties.camera.x<this.stageWidth-this.cameraSize.width)){var e=this.stageGeneratingProperties.colliderContainer.children.map(function(e){var t=e.getPosition(),o=e.getComponent(cc.PhysicsBoxCollider).size.width;return{x:t.x,y:t.y,w:o}}).sort(function(e,t){return t.x+e.w-(e.x+e.w)})[0],t=this.stageGeneratingProperties.minPlatformWidth,o=this.stageGeneratingProperties.maxPlatformWidth,n=t+this.random.percentage()/100*(o-t),r=e.x+e.w+this.random.percentage()/100*this.getJumpDistance(),i=e.y;this.createNewPlatform(r,i,n),this.spawnEnemiesOnPlatform(r-this.cameraSize.width/2,i-this.cameraSize.height/2,n),this.spawnCollectablesOnPlatform(r-this.cameraSize.width/2,i-this.cameraSize.height/2,n),this.stageWidth=r+n}},t.prototype.createNewPlatform=function(e,t,o){var n=this.stageGeneratingProperties.platformSpriteL,r=this.stageGeneratingProperties.platformSpriteM,i=this.stageGeneratingProperties.platformSpriteR;if(!n||!r||!i)throw new Error("Missing platform sprite!! Please drag and bind to GameManager!!");var a=Math.ceil(o/32),c=o/a,s=new cc.Node;s.name="Ground",s.setAnchorPoint(new cc.Vec2(0,1)),s.setContentSize(new cc.Size(o,640));var p=s.addComponent(cc.RigidBody);p.type=cc.RigidBodyType.Kinematic,p.gravityScale=0;var l=s.addComponent(cc.PhysicsBoxCollider);l.size=new cc.Size(o,640),l.offset=new cc.Vec2(o/2,-320),l.apply();for(var u=0;u<a;u++){var d=new cc.Node;d.setParent(s),d.setAnchorPoint(new cc.Vec2(0,1)),d.setContentSize(new cc.Size(c,640)),d.setPosition(new cc.Vec2(c*u,0));var h=d.addComponent(cc.Sprite);0==u?(d.name="L",h.spriteFrame=n):u==a-1?(d.name="R",h.spriteFrame=i):(d.name="M",h.spriteFrame=r)}return s.setParent(this.stageGeneratingProperties.colliderContainer),s.setPosition(new cc.Vec2(e,t)),s},t.prototype.getJumpDistance=function(){var e=this.playerProperties.playerJumpVel,t=this.physicsManager.gravity.y,o=2*Math.abs(e/t);return this.playerProperties.playerSpeed*o/2},t.prototype.restart=function(){cc.audioEngine.playEffect(this.rebornEffect,!1);var e=cc.director.getScene().name;cc.director.loadScene(e,function(){console.log(e+" reloaded successfully")})},t.prototype.respawn=function(){this.restart()},t.prototype.spawnPlayers=function(){for(var e=this,t={},o=0,n=this.availableColorGroups;o<n.length;o++){var r=n[o];t[r.groupName]=r}if(l.DataManager.getInstance().selectedPlayers.some(function(e){return!(e in t)}))throw new Error("Invalid Color Chosen!");l.DataManager.getInstance().selectedPlayers.reverse().forEach(function(o,n){var r=cc.instantiate(t[o].playerPrefab),i=new cc.Vec2(e.playerProperties.playerInitialPosition.x+e.playerProperties.distBetweenPlayers*n,e.playerProperties.playerInitialPosition.y+r.getComponent(cc.PhysicsBoxCollider).size.height/2);r.name=t[o].reprColor.toHEX(),r.setParent(e.playerProperties.playerContainer),r.setPosition(i);var a=r.getComponent(u.PlayerController);e.players.push(a),a.createSprite(),a.playerSpeed=e.playerProperties.playerSpeed,a.playerJumpVel=e.playerProperties.playerJumpVel,a.shiftingSpeed=e.playerProperties.playerShiftingSpeed,a.bulletSpeed=e.playerProperties.bulletSpeed,a.bulletDistance=e.playerProperties.bulletDistance})},t.prototype.scanDeadPlayer=function(){var e=this.players.filter(function(e){return e.dying}).length;if(0!==e){if(this.lives<=e)return this.restart();this.lives-=e;for(var t=0,o=this.players;t<o.length;t++){var n=o[t];if(n.dying){var r=this.getLastPlayer(),i=new cc.Vec2(n!=r?-100:0,0);n.node.setPosition(r.node.getPosition().add(i)),n.dying=!1}}}},t.prototype.isLeadingPlayer=function(e){if(!this.players[e])return!1;var t=Math.round(Math.max.apply(Math,this.players.map(function(e){return e.node.x})));return Math.round(this.players[e].node.x)==t},t.prototype.getLeadingPlayer=function(){for(var e=null,t=-1/0,o=0,n=this.players;o<n.length;o++){var r=n[o];r.node.x>t&&(t=r.node.x,e=r)}return e},t.prototype.getLastPlayer=function(){for(var e=null,t=1/0,o=0,n=this.players;o<n.length;o++){var r=n[o];r.node.x<t&&(t=r.node.x,e=r)}return e},t.prototype.switchWithLeadingPlayer=function(e){var t,o=this;if(!(e>=this.players.length)&&this.canSwitch){var n=this.getLeadingPlayer(),r=this.players[e];n&&r!==n&&(t=[r.node.position,n.node.position],n.node.position=t[0],r.node.position=t[1]),this.canSwitch=!1,this.scheduleOnce(function(){o.canSwitch=!0},.2),cc.audioEngine.playEffect(this.switchEffect,!1)}},t.prototype.spawnEnemies=function(){for(var e=this.getLeadingPlayer().node.getPosition().x+this.cameraSize.width/2,t=0,o=this.getStagePlatforms(function(t){return t.x+t.w>e});t<o.length;t++){var n=o[t],r=n.x,i=n.y,a=n.w;e=this.spawnEnemiesOnPlatform(Math.max(r,e),i,r+a-Math.max(r,e))}},t.prototype.spawnEnemiesOnPlatform=function(e,t,o){for(var n=e,r=Math.floor(o/this.enemyProperties.minDistBetweenEnemy)-1;r>=0;r--)if(!(this.random.percentage()>this.enemyProperties.enemySpawnProbability)){var i=this.getRandomColorGroup(),a=cc.instantiate(i.enemyPrefabs[this.random.random()%i.enemyPrefabs.length]),c=a.getComponent(cc.PhysicsBoxCollider).size,s=new cc.Vec2(Math.ceil(c.width/2),c.height/2);a.name=i.reprColor.toHEX(),a.setParent(this.enemyProperties.enemyContainer),a.setPosition(new cc.Vec2(e+r*this.enemyProperties.minDistBetweenEnemy,t).add(s)),console.log("spawn enemy at",a.x,a.y),n=a.getPosition().x+c.width}return n},t.prototype.spawnCollectables=function(){for(var e=this.getLeadingPlayer().node.getPosition().x+this.cameraSize.width/2,t=0,o=this.getStagePlatforms(function(t){return t.x+t.w>e});t<o.length;t++){var n=o[t],r=n.x,i=n.y,a=n.w;e=Math.max(e,this.spawnShieldsOnPlatform(Math.max(r,e),i,r+a-Math.max(r,e)),this.spawnCollectablesOnPlatform(Math.max(r,e),i,r+a-Math.max(r,e)))}},t.prototype.spawnCollectablesOnPlatform=function(e,t,o){for(var n=this.collectableProperties,r=n.minDistAboveGround,i=n.maxDistAboveGround,a=e,c=Math.floor(o/this.collectableProperties.minDistBetweenCollectable)-1;c>=0;c--)if(!(this.random.percentage()>this.collectableProperties.collectableSpawnProbability)){var s=this.getRandomColorGroup(),p=cc.instantiate(s.collectablePrefabs[this.random.random()%s.collectablePrefabs.length]),l=p.getComponent(cc.PhysicsBoxCollider).size,u=r+this.random.percentage()/100*(i-r),d=new cc.Vec2(Math.ceil(l.width/2),l.height+u);p.name=s.reprColor.toHEX(),p.setParent(this.collectableProperties.collectableContainer),p.setPosition(new cc.Vec2(e+c*this.collectableProperties.minDistBetweenCollectable,t).add(d)),a=p.getPosition().x+l.width}return a},t.prototype.spawnShieldsOnPlatform=function(e,t,o){for(var n=this.collectableProperties,r=n.minDistAboveGround,i=n.maxDistAboveGround,a=e,c=Math.floor(o/this.collectableProperties.minDistBetweenCollectable)-1;c>=0;c--)if(!(this.random.percentage()>this.collectableProperties.shieldSpawnProbability)){var s=cc.instantiate(this.collectableProperties.shieldPrefab),p=s.getComponent(cc.PhysicsBoxCollider).size,l=r+this.random.percentage()/100*(i-r),u=new cc.Vec2(Math.ceil(p.width/2),p.height+l);s.setParent(this.collectableProperties.collectableContainer),s.setPosition(new cc.Vec2(e+c*this.collectableProperties.minDistBetweenCollectable,t).add(u)),a=s.getPosition().x+p.width}return a},t.prototype.pollGamepads=function(){for(var e=navigator.getGamepads?navigator.getGamepads():[],t=0;t<e.length;t++){var o=e[t];o&&this.handleGamepadInput(o)}},t.prototype.handleGamepadInput=function(e){switch(e.index){case 0:e.buttons[3].pressed&&(1===l.DataManager.getInstance().userCount?this.players[0]&&this.isLeadingPlayer(0)?this.players[0].playerJump():this.players[1].playerJump():this.players[0]&&this.players[0].playerJump()),e.buttons[1].pressed&&(1===l.DataManager.getInstance().userCount&&this.isLeadingPlayer(0)?this.switchWithLeadingPlayer(1):this.switchWithLeadingPlayer(0)),e.buttons[0].pressed&&(1===l.DataManager.getInstance().userCount?this.getLeadingPlayer().playerShoot():this.players[0]&&this.isLeadingPlayer(0)&&this.players[0].playerShoot()),e.buttons[12].pressed&&1===l.DataManager.getInstance().userCount&&(this.players[0]&&this.isLeadingPlayer(0)?this.players[1].playerJump():this.players[0].playerJump());break;case 1:e.buttons[3].pressed&&this.players[1]&&this.players[1].playerJump(),e.buttons[1].pressed&&this.switchWithLeadingPlayer(1),e.buttons[0].pressed&&this.players[1]&&this.isLeadingPlayer(1)&&this.players[1].playerShoot();break;case 2:e.buttons[3].pressed&&this.players[2]&&this.players[2].playerJump(),e.buttons[1].pressed&&this.switchWithLeadingPlayer(2),e.buttons[0].pressed&&this.players[2]&&this.isLeadingPlayer(2)&&this.players[2].playerShoot();break;case 3:e.buttons[3].pressed&&this.players[3]&&this.players[3].playerJump(),e.buttons[1].pressed&&this.switchWithLeadingPlayer(3),e.buttons[0].pressed&&this.players[3]&&this.isLeadingPlayer(3)&&this.players[2].playerShoot()}},t.prototype.onGamepadConnected=function(e){var t=e.gamepad;this.gamepads[t.index]=t,console.log("Gamepad connected at index "+t.index+": "+t.id)},t.prototype.onGamepadDisconnected=function(e){var t=e.gamepad;delete this.gamepads[t.index],console.log("Gamepad disconnected from index "+t.index+": "+t.id)},i([s()],t.prototype,"stageRandomSeed",void 0),i([s()],t.prototype,"isInfiniteStage",void 0),i([s(y)],t.prototype,"cameraProperties",void 0),i([s(g)],t.prototype,"playerProperties",void 0),i([s(m)],t.prototype,"enemyProperties",void 0),i([s(v)],t.prototype,"collectableProperties",void 0),i([s(b)],t.prototype,"stageGeneratingProperties",void 0),i([s([h])],t.prototype,"availableColorGroups",void 0),i([s(cc.AudioClip)],t.prototype,"rebornEffect",void 0),i([s(cc.AudioClip)],t.prototype,"switchEffect",void 0),i([c,p],t)}(cc.Component);o.GameManager=_,cc._RF.pop()},{"./../../Scripts/DataManager":"DataManager","./PlayerController":"PlayerController"}],PauseStartButton:[function(e,t,o){"use strict";cc._RF.push(t,"b0dcdM7GsJFYoOxxQfP5qlv","PauseStartButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button=null,t.buttonLabel=null,t}return r(t,e),t.prototype.start=function(){this.button&&this.button.node.on("click",this.onButtonClick,this),this.updateButtonLabel()},t.prototype.onButtonClick=function(){cc.director.isPaused()?cc.director.resume():cc.director.pause(),this.updateButtonLabel()},t.prototype.updateButtonLabel=function(){this.buttonLabel&&(cc.director.isPaused()?this.buttonLabel.string="Resume":this.buttonLabel.string="Pause")},i([s(cc.Button)],t.prototype,"button",void 0),i([s(cc.Label)],t.prototype,"buttonLabel",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],PlayBGM:[function(e,t,o){"use strict";cc._RF.push(t,"59151n8vRJJGYmyfWj2L7e6","PlayBGM");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=e("./AudioManager"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgmClip=null,t}return r(t,e),t.prototype.onLoad=function(){p.AudioManager.getInstance().playBGM(this.bgmClip)},i([s(cc.AudioClip)],t.prototype,"bgmClip",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./AudioManager":"AudioManager"}],PlayerAnimator:[function(e,t,o){"use strict";cc._RF.push(t,"5850dhezi5JQpXNuY8BuKoe","PlayerAnimator");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerAnimator=void 0;var a=cc._decorator,c=a.ccclass,s=(a.property,a.disallowMultiple),p=e("./../../Scripts/DataManager"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.walkAnimation=null,t.jumpAnimation=null,t.deadAnimation=null,t.tracking=null,t.trackingSpeed=1e3,t}return r(t,e),t.prototype.start=function(){},t.prototype.update=function(e){if(null!==this.tracking){var t=this.tracking.getPosition().sub(this.node.getPosition()),o=this.trackingSpeed*p.DataManager.getInstance().gameSpeed*e;t.mag()<=o?this.node.setPosition(this.tracking.getPosition()):this.node.setPosition(this.node.getPosition().add(t.normalize().mul(o)))}},t.prototype.trackNode=function(e,t){this.tracking=e,this.trackingSpeed=t},t.prototype.setWalkClip=function(e){this.walkAnimation=e,this.getComponent(cc.Animation).addClip(this.walkAnimation)},t.prototype.setJumpClip=function(e){this.jumpAnimation=e,this.getComponent(cc.Animation).addClip(this.walkAnimation)},t.prototype.setDeadClip=function(e){this.deadAnimation=e,this.getComponent(cc.Animation).addClip(this.walkAnimation)},t.prototype.isPlayingDead=function(){return this.isPlaying(this.deadAnimation.name)},t.prototype.isPlayingWalk=function(){return this.isPlaying(this.walkAnimation.name)},t.prototype.isPlayingJump=function(){return this.isPlaying(this.jumpAnimation.name)},t.prototype.isPlaying=function(e){var t=this.getComponent(cc.Animation).getAnimationState(e);return t&&t.isPlaying},t.prototype.playDead=function(){this.play(this.deadAnimation.name)},t.prototype.playWalk=function(){this.play(this.walkAnimation.name)},t.prototype.playJump=function(){this.play(this.jumpAnimation.name)},t.prototype.play=function(e){this.getComponent(cc.Animation).play(e)},t.prototype.stop=function(){this.getComponent(cc.Animation).stop()},i([c,s],t)}(cc.Component);o.PlayerAnimator=l,cc._RF.pop()},{"./../../Scripts/DataManager":"DataManager"}],PlayerController:[function(e,t,o){"use strict";cc._RF.push(t,"fb81dERkSFELLSNVZ/9Ve8M","PlayerController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerController=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,p=a.disallowMultiple,l=e("./../../Scripts/DataManager"),u=e("./PlayerAnimator"),d=e("./Bullet"),h=function(){this.kills=0,this.deathes=0,this.collected=0,this.stars=0},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.sprite=null,t.anim=null,t.walkAnimation=null,t.jumpAnimation=null,t.deadAnimation=null,t.shootEffect=null,t.jumpEffect=null,t.dieEffect=null,t.performance=new h,t.dying=!1,t.playerSpeed=150,t.playerJumpVel=600,t.shiftingSpeed=1e3,t.bulletSpeed=300,t.bulletDistance=1e3,t.invincibleTime=0,t.physicsBoxCollider=null,t.colliderSize=new cc.Size(24,40),t.canShoot=!0,t.isFalling=!1,t}return r(t,e),t.prototype.onLoad=function(){this.physicsBoxCollider=this.getComponent(cc.PhysicsBoxCollider),this.physicsBoxCollider.size=this.colliderSize,this.node.getChildByName("die").active=!1},t.prototype.start=function(){},t.prototype.createSprite=function(){return this.sprite=new cc.Node(this.node.name+"-sprite"),this.sprite.setScale(2,2),this.node.getParent().addChild(this.sprite,this.node.zIndex-1),this.sprite.setParent(this.node.getParent()),this.sprite.setPosition(this.node.getPosition()),this.sprite.addComponent(cc.Sprite),this.sprite.addComponent(cc.Animation),this.anim=this.sprite.addComponent(u.PlayerAnimator),this.anim.trackNode(this.node,this.shiftingSpeed),this.anim.setWalkClip(this.walkAnimation),this.anim.setJumpClip(this.jumpAnimation),this.anim.setDeadClip(this.deadAnimation),this.sprite},t.prototype.update=function(e){this.node.y<-330?this.die():(this.node.x+=this.playerSpeed*l.DataManager.getInstance().gameSpeed*e,this.invincibleTime=Math.max(0,this.invincibleTime-e),this.isFalling=0!=this.getComponent(cc.RigidBody).linearVelocity.y,this.playerAnimation())},t.prototype.onBeginContact=function(e,t,o){"Ground"===o.node.name&&0!=e.getWorldManifold().normal.x&&this.node.convertToWorldSpaceAR(new cc.Vec2(0,-this.physicsBoxCollider.size.height/2)).y<o.node.convertToWorldSpaceAR(cc.Vec2.ZERO).y&&this.die()},t.prototype.die=function(){var e=this;this.dying||(this.dying=!0,this.performance.deathes++,cc.audioEngine.playEffect(this.dieEffect,!1),this.node.getChildByName("die").active=!0,this.scheduleOnce(function(){e.node.getChildByName("die").active=!1},.5))},t.prototype.playerAnimation=function(){this.anim&&(!0===this.dying||(!0===this.isFalling?this.anim.isPlayingJump()||this.anim.stop():this.anim.isPlayingWalk()||this.anim.playWalk()))},t.prototype.playerShoot=function(){var e=this;if(this.canShoot){var t=cc.instantiate(this.bulletPrefab);t.name="bullet",t.color=cc.Color.fromHEX(t.color,this.node.name),t.setParent(this.node),t.setPosition(cc.Vec2.ZERO),t.setScale(.25,.25,.25);var o=t.getComponent(d.Bullet);o.bulletSpeed=this.bulletSpeed,o.bulletDistance=this.bulletDistance,this.canShoot=!1,this.scheduleOnce(function(){e.canShoot=!0},.2),cc.audioEngine.playEffect(this.shootEffect,!1)}},t.prototype.playerJump=function(){this.isFalling||(this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,this.playerJumpVel),this.anim.playJump(),cc.audioEngine.playEffect(this.jumpEffect,!1))},i([s(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([s(cc.AnimationClip)],t.prototype,"walkAnimation",void 0),i([s(cc.AnimationClip)],t.prototype,"jumpAnimation",void 0),i([s(cc.AnimationClip)],t.prototype,"deadAnimation",void 0),i([s(cc.AudioClip)],t.prototype,"shootEffect",void 0),i([s(cc.AudioClip)],t.prototype,"jumpEffect",void 0),i([s(cc.AudioClip)],t.prototype,"dieEffect",void 0),i([c,p],t)}(cc.Component);o.PlayerController=f,cc._RF.pop()},{"./../../Scripts/DataManager":"DataManager","./Bullet":"Bullet","./PlayerAnimator":"PlayerAnimator"}],SettingScene:[function(e,t,o){"use strict";cc._RF.push(t,"cc736GejkhAsZHd5551ApGs","SettingScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=e("./AudioManager"),l=e("./DataManager"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgmClip=null,t}return r(t,e),t.prototype.loadBackScene=function(){cc.director.loadScene("StartScene")},t.prototype.initBackButton=function(){var e=new cc.Component.EventHandler;e.target=this.node,e.component="SettingScene",e.handler="loadBackScene",cc.find("Canvas/BackButton").getComponent(cc.Button).clickEvents.push(e)},t.prototype.start=function(){this.initBackButton(),cc.find("Canvas/BackgroundMusicSlider").getComponent(cc.Slider).progress=l.DataManager.getInstance().bgmVolume,cc.find("Canvas/EffectSlider").getComponent(cc.Slider).progress=l.DataManager.getInstance().effectVolume,cc.find("Canvas/PlaySpeedSlider").getComponent(cc.Slider).progress=Math.trunc(l.DataManager.getInstance().gameSpeed/2),cc.find("Canvas/LivesSlider").getComponent(cc.Slider).progress=Math.trunc(l.DataManager.getInstance().playerLives/10),p.AudioManager.getInstance().playBGM(this.bgmClip)},t.prototype.update=function(){var e=cc.find("Canvas/BackgroundMusicSlider").getComponent(cc.Slider);l.DataManager.getInstance().bgmVolume=e.progress,cc.find("Canvas/BackgroundMusicSlider/ValueLabel").getComponent(cc.Label).string=Math.trunc(100*e.progress).toString(),cc.audioEngine.setMusicVolume(e.progress);var t=cc.find("Canvas/EffectSlider").getComponent(cc.Slider);l.DataManager.getInstance().effectVolume=t.progress,cc.find("Canvas/EffectSlider/ValueLabel").getComponent(cc.Label).string=Math.trunc(100*t.progress).toString(),cc.audioEngine.setEffectsVolume(t.progress);var o=cc.find("Canvas/PlaySpeedSlider").getComponent(cc.Slider);l.DataManager.getInstance().gameSpeed=.25*Math.trunc(7*o.progress)+.25,cc.find("Canvas/PlaySpeedSlider/ValueLabel").getComponent(cc.Label).string=l.DataManager.getInstance().gameSpeed.toString();var n=cc.find("Canvas/LivesSlider").getComponent(cc.Slider);l.DataManager.getInstance().playerLives=Math.trunc(9*n.progress)+1,cc.find("Canvas/LivesSlider/ValueLabel").getComponent(cc.Label).string=l.DataManager.getInstance().playerLives.toString()},i([s(cc.AudioClip)],t.prototype,"bgmClip",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./DataManager":"DataManager"}],Shield:[function(e,t,o){"use strict";cc._RF.push(t,"48279M2OjZMHLAdrN0GCka2","Shield");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Shield=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,p=a.disallowMultiple,l=e("./PlayerController"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultAnimation=null,t.crystalEffect=null,t.invincibleTime=5,t.anim=null,t.protectingPlayer=null,t}return r(t,e),t.prototype.onLoad=function(){this.anim=this.addComponent(cc.Animation),this.anim.addClip(this.defaultAnimation)},t.prototype.update=function(){this.anim.getAnimationState(this.defaultAnimation.name).isPlaying||this.anim.play(this.defaultAnimation.name),this.protectingPlayer&&(this.node.setParent(this.protectingPlayer),this.node.setPosition(this.node.width/2,-this.node.height/3))},t.prototype.onBeginContact=function(e,t,o){var n=this,r=o.node.getComponent(l.PlayerController);r&&!this.protectingPlayer&&(this.protectingPlayer=o.node,r.invincibleTime=this.invincibleTime,this.scheduleOnce(function(){n.node.destroy()},r.invincibleTime),cc.audioEngine.playEffect(this.crystalEffect,!1))},i([s(cc.AnimationClip)],t.prototype,"defaultAnimation",void 0),i([s(cc.AudioClip)],t.prototype,"crystalEffect",void 0),i([c,p],t)}(cc.Component);o.Shield=u,cc._RF.pop()},{"./PlayerController":"PlayerController"}],StartScene:[function(e,t,o){"use strict";cc._RF.push(t,"cc75fjyukdFQ79bpYN9iV/5","StartScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./AudioManager"),c=e("./DataManager"),s=cc._decorator,p=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Labels=[],t.bgmClip=null,t.Index=0,t}return r(t,e),t.prototype.onKeyDown=function(e){e.keyCode==cc.macro.KEY.up&&this.Index--,e.keyCode==cc.macro.KEY.down&&this.Index++,this.Index=(this.Index+3)%3,e.keyCode==cc.macro.KEY.enter&&(0==this.Index?cc.director.loadScene("ChoosePlayerScene"):1==this.Index?cc.director.loadScene("SettingScene"):2==this.Index&&cc.director.loadScene("Login"))},t.prototype.toLeaderboard=function(){cc.director.loadScene("Scoreboard")},t.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.audioEngine.setMusicVolume(c.DataManager.getInstance().bgmVolume),cc.audioEngine.setEffectsVolume(c.DataManager.getInstance().effectVolume),a.AudioManager.getInstance().playBGM(this.bgmClip)},t.prototype.update=function(){for(var e=cc.find("Canvas/Pointer"),t=0,o=this.Labels;t<o.length;t++){var n=o[t];n.node.scaleX=n.node.scaleY=1}this.Labels[this.Index].node.scaleX=1.5,this.Labels[this.Index].node.scaleY=1.5,0==this.Index&&(e.position=cc.v3(-316,70,0)),1==this.Index&&(e.position=cc.v3(-316,-10,0)),2==this.Index&&(e.position=cc.v3(-316,-90,0))},i([l([cc.Label])],t.prototype,"Labels",void 0),i([l(cc.AudioClip)],t.prototype,"bgmClip",void 0),i([p],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./DataManager":"DataManager"}],Star:[function(e,t,o){"use strict";cc._RF.push(t,"39ac5YkCDdEhZ/8mvfrVEPk","Star");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Star=void 0;var a=e("../../Scripts/Firebase/User"),c=cc._decorator,s=c.ccclass,p=c.property,l=c.disallowMultiple,u=e("./PlayerController"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultAnimation=null,t.crystalEffect=null,t.anim=null,t}return r(t,e),t.prototype.onLoad=function(){this.anim=this.addComponent(cc.Animation),this.anim.addClip(this.defaultAnimation)},t.prototype.update=function(){this.anim.getAnimationState(this.defaultAnimation.name).isPlaying||this.anim.play(this.defaultAnimation.name)},t.prototype.onBeginContact=function(e,t,o){var n=o.node.getComponent(u.PlayerController);n&&(a.score+=50,n.performance.stars++,this.node.destroy(),cc.audioEngine.playEffect(this.crystalEffect,!1))},i([p(cc.AnimationClip)],t.prototype,"defaultAnimation",void 0),i([p(cc.AudioClip)],t.prototype,"crystalEffect",void 0),i([s,l],t)}(cc.Component);o.Star=d,cc._RF.pop()},{"../../Scripts/Firebase/User":"User","./PlayerController":"PlayerController"}],TransitionNextScene:[function(e,t,o){"use strict";cc._RF.push(t,"3f7eavyCWZEGKvt24a619R6","TransitionNextScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextScene="StartScene",t}return r(t,e),t.prototype.start=function(){var e=this;cc.audioEngine.stopAll(),cc.find("Canvas/VideoPlayer").getComponent(cc.VideoPlayer).play(),this.scheduleOnce(function(){cc.director.loadScene(e.nextScene)},6)},i([s(cc.String)],t.prototype,"nextScene",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"25c6ajClAVGdoJVi1Vt4XWe","UIManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=e("../../Scripts/DataManager"),l=e("../../Scripts/Firebase/User"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.heart=null,t.star=null,t.heartNumber=0,t.starNumber=0,t.heartNodes=[],t.starNodes=[],t}return r(t,e),t.prototype.update=function(){if(this.heartNumber!==p.DataManager.getInstance().currentPlayerLives||this.starNumber!==p.DataManager.getInstance().currentStars){this.heartNumber=p.DataManager.getInstance().currentPlayerLives,this.starNumber=p.DataManager.getInstance().currentStars,this.heartNodes.forEach(function(e){return e.destroy()}),this.heartNodes=[],this.starNodes.forEach(function(e){return e.destroy()}),this.starNodes=[];for(var e=0;e<this.heartNumber;e++){var t=cc.instantiate(this.heart);t.parent=this.node,t.setPosition(cc.v2(50+40*e,cc.winSize.height-50)),this.heartNodes.push(t)}for(e=0;e<this.starNumber;e++){var o=cc.instantiate(this.star);o.parent=this.node,o.setPosition(cc.v2(50+40*e,cc.winSize.height-100)),this.starNodes.push(o)}}cc.find("Canvas/Main Camera/Score").getComponent(cc.Label).string=l.score.toString()},i([s(cc.Prefab)],t.prototype,"heart",void 0),i([s(cc.Prefab)],t.prototype,"star",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Scripts/DataManager":"DataManager","../../Scripts/Firebase/User":"User"}],User:[function(e,t){"use strict";cc._RF.push(t,"816e5LCHkpADIONgKXvx6aY","User"),t.exports={username:"",score:0},cc._RF.pop()},{}],VideoManager:[function(e,t,o){"use strict";cc._RF.push(t,"16e46XSFetLCpSNpfJ/bt6M","VideoManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){this.node.setContentSize(cc.winSize),this.node.scaleY*=1.2,this.getComponent(cc.VideoPlayer).play()},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],audioManager:[function(e,t,o){"use strict";cc._RF.push(t,"5fd22cJmiJDdaLthVZi8CZr","audioManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.stopAllEffects=function(){cc.audioEngine.stopAllEffects()},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],bg:[function(e,t,o){"use strict";cc._RF.push(t,"af9f1hAw4NGy4fgUzJC+J+t","bg");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spaceObjectNode=null,t}return r(t,e),t.prototype.onLoad=function(){var e=this.getRandomNumber(-200,200),t=this.getRandomNumber(-200,200),o=this.spaceObjectNode.getComponent(cc.Animation),n=this.getRandomNumber(0,3);this.spaceObject=new l(0,0,e,t,o,n),this.spaceObject.playAnimation()},t.prototype.update=function(e){var t=this.spaceObject.getPosition();t.x>=450||t.x<=-450?this.spaceObject.velocityX*=-1:(t.y>=280||t.y<=-280)&&(this.spaceObject.velocityY*=-1),(this.spaceObject.velocityX<0&&this.spaceObjectNode.scaleX>0||this.spaceObject.velocityX>0&&this.spaceObjectNode.scaleX<0)&&(this.spaceObjectNode.scaleX*=-1),this.spaceObject.update(e);var o=this.spaceObject.getPosition();this.spaceObjectNode.setPosition(o.x,o.y)},t.prototype.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},i([s(cc.Node)],t.prototype,"spaceObjectNode",void 0),i([c],t)}(cc.Component);o.default=p;var l=function(){function e(e,t,o,n,r,i){this.x=e,this.y=t,this.velocityX=o,this.velocityY=n,this.anim=r,this.clipIndex=i}return e.prototype.update=function(e){this.x+=this.velocityX*e,this.y+=this.velocityY*e},e.prototype.getPosition=function(){return{x:this.x,y:this.y}},e.prototype.playAnimation=function(){this.anim&&this.anim.getClips().length>this.clipIndex&&this.anim.play(this.anim.getClips()[this.clipIndex].name)},e}();cc._RF.pop()},{}],cameraEffect:[function(e,t,o){"use strict";cc._RF.push(t,"eefe7SG0LhNrp4QJk1hAaLP","cameraEffect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CameraEffect=void 0;var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.isBlack=!0,t.duration=.5,t}return r(t,e),t.prototype.start=function(){this.schedule(this.toggleColor,this.duration)},t.prototype.toggleColor=function(){this.isBlack?this.camera.backgroundColor=cc.Color.WHITE:this.camera.backgroundColor=cc.Color.BLACK,this.isBlack=!this.isBlack},i([s(cc.Camera)],t.prototype,"camera",void 0),i([c("CameraEffect")],t)}(cc.Component);o.CameraEffect=p,cc._RF.pop()},{}],collider:[function(e,t,o){"use strict";cc._RF.push(t,"52c31hW7JxIlZh2oVa0NErl","collider");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=a.disallowMultiple,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tiledMap=null,t}return r(t,e),t.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.tiledMap||(this.tiledMap=new cc.TiledMap);var e=this.tiledMap.getObjectGroup("ground");e||(e=new cc.TiledObjectGroup);var t=e.getObjects()||[];this.createColliders(t)},t.prototype.createColliders=function(e){var t=this;e.forEach(function(e){var o=new cc.Node;t.node.addChild(o),o.name="Ground",o.setPosition(e.x,e.y),cc.log(e.x,e.y),o.addComponent(cc.RigidBody).type=cc.RigidBodyType.Kinematic;var n=null;if(e.width&&e.height){var r=o.addComponent(cc.PhysicsBoxCollider);r.offset=cc.v2(e.width/2,-e.height/2),r.size=cc.size(e.width,e.height),n=r}else if(e.points){var i=o.addComponent(cc.PhysicsPolygonCollider),a=e.points.map(function(e){return cc.v2(e.x,e.y)});i.points=a,n=i}n.apply()})},i([s(cc.TiledMap)],t.prototype,"tiledMap",void 0),i([c,p],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],leaderboard:[function(e,t,o){"use strict";cc._RF.push(t,"2d49b8H+IxLybH8U5KDIyzq","leaderboard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leaderboardItems=[],t.UserScore=null,t}return r(t,e),t.prototype.onLoad=function(){this.loadLeaderboardData(),this.loadUserScore()},t.prototype.loadLeaderboardData=function(){var e=this;firebase.database().ref("username").orderByChild("score").limitToLast(5).once("value",function(t){var o=5,n=[];t.forEach(function(e){var t=e.val();n.push({rank:o,username:t.username,score:t.score}),o--}),n.reverse(),n.forEach(function(t,o){if(o<e.leaderboardItems.length){var n=e.leaderboardItems[o];n.getChildByName("Rank").getComponent(cc.Label).string=t.rank.toString(),n.getChildByName("Name").getComponent(cc.Label).string=t.username,n.getChildByName("Score").getComponent(cc.Label).string=t.score.toString()}})})},t.prototype.loadUserScore=function(){var e=this,t=firebase.auth().currentUser;t&&firebase.database().ref("username").child(t.uid).once("value").then(function(t){var o=t.val();e.UserScore&&(e.UserScore.string=o.score)})},t.prototype.Back=function(){cc.director.loadScene("StartScene")},i([s([cc.Node])],t.prototype,"leaderboardItems",void 0),i([s(cc.Label)],t.prototype,"UserScore",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],mapLevel:[function(e,t,o){"use strict";cc._RF.push(t,"8bb9bpQwbxGHKpVPDX0WXmJ","mapLevel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.passedSpriteFrame=null,t.notPassedSpriteFrame=null,t.isPassed=!1,t.backgroundNode=null,t}return r(t,e),t.prototype.onLoad=function(){this.updateButtonBackground()},t.prototype.updateButtonBackground=function(){var e=this.backgroundNode.getComponent(cc.Sprite);e?this.isPassed?e.spriteFrame=this.passedSpriteFrame:e.spriteFrame=this.notPassedSpriteFrame:console.error("No cc.Sprite component found on the background node.")},i([s({type:cc.SpriteFrame})],t.prototype,"passedSpriteFrame",void 0),i([s({type:cc.SpriteFrame})],t.prototype,"notPassedSpriteFrame",void 0),i([s],t.prototype,"isPassed",void 0),i([s(cc.Node)],t.prototype,"backgroundNode",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],moveCameraInMapScene:[function(e,t,o){"use strict";cc._RF.push(t,"92254szwRhOfqZ4wm/JAOfg","moveCameraInMapScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.objects=[],t.moveSpeed=5,t.backButton=null,t.nextButton=null,t.targetPosition=null,t.isMoving=!1,t.targetSceneName="",t}return r(t,e),t.prototype.loadNextScene=function(){cc.director.loadScene(this.targetSceneName)},t.prototype.loadBackScene=function(){cc.director.loadScene("ChooseRoleScene")},t.prototype.onLoad=function(){var e=this;this.camera=this.camera||this.getComponent(cc.Camera),this.objects.length>0&&this.moveToTarget(this.objects[0]),this.objects.forEach(function(t){t.on("click",function(){return e.moveToTarget(t)},e)}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.update=function(e){if(this.isMoving&&this.targetPosition){var t=this.camera.node.position,o=cc.v3(cc.misc.lerp(t.x,this.targetPosition.x,e*this.moveSpeed),cc.misc.lerp(t.y,this.targetPosition.y,e*this.moveSpeed),t.z||0);this.camera.node.setPosition(o),cc.Vec3.distance(o,this.targetPosition)<.1&&(this.camera.node.setPosition(this.targetPosition),this.isMoving=!1)}},t.prototype.moveToTarget=function(e){this.targetPosition=e.position,this.isMoving=!0,this.targetSceneName="LoadingStage"+e.getChildByName("Label").getComponent(cc.Label).string},t.prototype.onKeyDown=function(e){if(e.keyCode==cc.macro.KEY.enter)this.loadNextScene();else{var t=e.keyCode-cc.macro.KEY[1];if(t>=0&&t<this.objects.length){var o=this.objects[t];this.moveToTarget(o)}}},i([s(cc.Camera)],t.prototype,"camera",void 0),i([s([cc.Node])],t.prototype,"objects",void 0),i([s()],t.prototype,"moveSpeed",void 0),i([s(cc.Node)],t.prototype,"backButton",void 0),i([s(cc.Node)],t.prototype,"nextButton",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],playSoundEffectBtn:[function(e,t,o){"use strict";cc._RF.push(t,"5725aZUjTxCy4WcjECn8aPd","playSoundEffectBtn");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundEffect=null,t}return r(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.playSoundEffect,this)},t.prototype.playSoundEffect=function(){this.soundEffect?cc.audioEngine.playEffect(this.soundEffect,!1):console.error("Sound effect is not assigned.")},i([s({type:cc.AudioClip})],t.prototype,"soundEffect",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],playSoundeffectLoadScene:[function(e,t,o){"use strict";cc._RF.push(t,"0ad6dxnXlZPcJ17jpWO3V42","playSoundeffectLoadScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundEffect=null,t}return r(t,e),t.prototype.onLoad=function(){cc.audioEngine.stopAll(),this.playSoundEffect()},t.prototype.playSoundEffect=function(){cc.audioEngine.playEffect(this.soundEffect,!1)},i([s({type:cc.AudioClip})],t.prototype,"soundEffect",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],sceneSwitch:[function(e,t,o){"use strict";cc._RF.push(t,"502f0b0af1JLZGipdHCUh05","sceneSwitch");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetScene=null,t}return r(t,e),t.prototype.onLoad=function(){this.scheduleOnce(this.switchScene,4)},t.prototype.switchScene=function(){cc.director.loadScene(this.targetScene.name)},i([s(cc.SceneAsset)],t.prototype,"targetScene",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],shutDownEffectSound:[function(e,t,o){"use strict";cc._RF.push(t,"36296dqMZRD77w7k2s4lIN1","shutDownEffectSound");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=e("./audioManager"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetScene=null,t.switchButton=null,t.soundEffect=null,t}return r(t,e),t.prototype.onLoad=function(){this.switchButton?this.switchButton.on(cc.Node.EventType.TOUCH_END,this.onSwitchButtonClicked,this):console.error("Switch button is not assigned.")},t.prototype.onSwitchButtonClicked=function(){this.switchScene()},t.prototype.switchScene=function(){var e=this;this.targetScene?(p.default.stopAllEffects(),cc.director.loadScene(this.targetScene.name,function(){console.log("Switched to "+e.targetScene.name+" scene.")}),this.soundEffect&&cc.audioEngine.playEffect(this.soundEffect,!1)):console.error("Target scene is not assigned.")},i([s(cc.SceneAsset)],t.prototype,"targetScene",void 0),i([s(cc.Node)],t.prototype,"switchButton",void 0),i([s({type:cc.AudioClip})],t.prototype,"soundEffect",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./audioManager":"audioManager"}],signin:[function(e,t,o){"use strict";cc._RF.push(t,"13cfdS73kBP452cmoRXM5NH","signin");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./User"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emailEditBox=null,t.passwordEditBox=null,t.signinButton=null,t.nextScene=null,t}return r(t,e),t.prototype.start=function(){this.signinButton.node.on(cc.Node.EventType.TOUCH_END,this.onLoginButtonClick,this)},t.prototype.onLoginButtonClick=function(){cc.log(this.nextScene.name);var e=this.emailEditBox.string,t=this.passwordEditBox.string,o=this;firebase.auth().signInWithEmailAndPassword(e,t).then(function(e){if(e){var t=firebase.auth().currentUser;cc.log("Login Success!"),firebase.database().ref("username").child(t.uid).once("value").then(function(e){cc.log("Get data");var t=e.val();cc.log(t),a.username=t.username,a.score=t.score}).then(function(){o.nextScene&&cc.director.loadScene(o.nextScene.name)})}}).catch(function(e){alert("Login error: "+e.message),cc.log("Login Error!")})},i([p(cc.EditBox)],t.prototype,"emailEditBox",void 0),i([p(cc.EditBox)],t.prototype,"passwordEditBox",void 0),i([p(cc.Button)],t.prototype,"signinButton",void 0),i([p(cc.SceneAsset)],t.prototype,"nextScene",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./User":"User"}],signout:[function(e,t,o){"use strict";cc._RF.push(t,"5b1cceSgLVBZaeANrreWTMb","signout");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emailEditBox=null,t.passwordEditBox=null,t.signinButton=null,t.nextScene=null,t}return r(t,e),t.prototype.start=function(){this.signinButton.node.on(cc.Node.EventType.TOUCH_END,this.onLoginButtonClick,this)},t.prototype.onLoginButtonClick=function(){var e=this,t=this.emailEditBox.string,o=this.passwordEditBox.string;firebase.auth().signInWithEmailAndPassword(t,o).then(function(t){var o=t.user;console.log("User signed in:",o),e.nextScene&&cc.director.loadScene(e.nextScene.name)}).catch(function(e){var t=e.code,o=e.message;console.error("Sign in error:",t,o)})},i([s(cc.EditBox)],t.prototype,"emailEditBox",void 0),i([s(cc.EditBox)],t.prototype,"passwordEditBox",void 0),i([s(cc.Button)],t.prototype,"signinButton",void 0),i([s(cc.SceneAsset)],t.prototype,"nextScene",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],signup:[function(e,t,o){"use strict";cc._RF.push(t,"83391tGV/ZI3qHV218MBLTR","signup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./User"),c=cc._decorator,s=c.ccclass,p=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emailEditBox=null,t.passwordEditBox=null,t.signupButton=null,t.nextScene=null,t}return r(t,e),t.prototype.start=function(){this.signupButton.node.on(cc.Node.EventType.TOUCH_END,this.onSignupButtonClick,this)},t.prototype.onSignupButtonClick=function(){var e=this.emailEditBox.string,t=this.passwordEditBox.string,o=this;firebase.auth().createUserWithEmailAndPassword(e,t).then(function(t){cc.log("create successfully");var n=e.split("@")[0];cc.log(n);var r={username:n,score:0};a.username=n,firebase.database().ref("username").child(t.user.uid).set(r),cc.log("push "+n),o.nextScene&&cc.director.loadScene(o.nextScene.name)}).catch(function(e){alert("Create error: "+e.message),cc.log("create error")})},i([p(cc.EditBox)],t.prototype,"emailEditBox",void 0),i([p(cc.EditBox)],t.prototype,"passwordEditBox",void 0),i([p(cc.Button)],t.prototype,"signupButton",void 0),i([p(cc.SceneAsset)],t.prototype,"nextScene",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./User":"User"}],toggleLabel:[function(e,t,o){"use strict";cc._RF.push(t,"6b4ebJMl5RNXoQ7iZyUESsq","toggleLabel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelNode=null,t}return r(t,e),t.prototype.onLoad=function(){this.labelNode&&(this.labelNode.active=!1),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},t.prototype.onMouseEnter=function(){this.labelNode&&(this.labelNode.active=!0)},t.prototype.onMouseLeave=function(){this.labelNode&&(this.labelNode.active=!1)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},i([s(cc.Node)],t.prototype,"labelNode",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],updateScore:[function(e,t,o){"use strict";cc._RF.push(t,"be237IakZdFg6MBshQsLrv5","updateScore"),Object.defineProperty(o,"__esModule",{value:!0}),o.updateScore=void 0;var n=e("./User"),r=cc._decorator;r.ccclass,r.property,o.updateScore=function(e){var t=firebase.auth().currentUser;if(t){var o=firebase.database().ref("username").child(t.uid);o.once("value").then(function(){var t=n.score;o.update({score:t}).then(function(){e&&e()})})}},cc._RF.pop()},{"./User":"User"}]},{},["BackButton","Bullet","Crystal","Enemy","GameManager","PauseStartButton","PlayerAnimator","PlayerController","Shield","Star","UIManager","collider","AudioManager","ChoosePlayerScene","ChooseRoleScene","CompleteScene","DataManager","User","leaderboard","signin","signout","signup","updateScore","PlayBGM","SettingScene","bg","mapLevel","moveCameraInMapScene","StartScene","TransitionNextScene","VideoManager","audioManager","playSoundEffectBtn","playSoundeffectLoadScene","shutDownEffectSound","cameraEffect","sceneSwitch","toggleLabel"]);